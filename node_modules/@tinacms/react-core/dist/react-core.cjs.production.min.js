"use strict";var n=require("react"),e=require("@tinacms/forms"),t=n.createContext(null);function u(){var e=n.useContext(t);if(!e)throw new Error("useCMS could not find an instance of CMS");return e}var i=r;function r(e){var t,i=u();t=Array.isArray(e)?e:[e],n.useEffect((function(){return t.forEach((function(n){n&&i.plugins.add(n)})),function(){t.forEach((function(n){n&&i.plugins.remove(n)}))}}),[i.plugins].concat(t))}function s(n,e){void 0===e&&(e={});var t=a(n,e),u=t[0],i=t[1];return r(i),[u,i]}var o=s;function a(e,t){var u=e.loadInitialValues,i=function(n,e){if(null==n)return{};var t,u,i={},r=Object.keys(n);for(u=0;u<r.length;u++)e.indexOf(t=r[u])>=0||(i[t]=n[t]);return i}(e,["loadInitialValues"]);void 0===t&&(t={}),i.initialValues=i.initialValues||t.values;var r=n.useState(i.initialValues)[1],s=n.useState((function(){return c(i,(function(n){r(n.values)}))})),o=s[0],a=s[1];return n.useEffect((function(){o.id!==i.id&&a(c(i,(function(n){r(n.values)})))}),[i.id]),n.useEffect((function(){u&&u().then((function(n){o.updateInitialValues(n)}))}),[o]),function(e,t){n.useEffect((function(){void 0!==t&&e.updateFields(t)}),[e,t])}(o,t.fields),function(e,t){n.useEffect((function(){void 0!==t&&(e.label=t)}),[e,t])}(o,t.label),function(e,t){n.useEffect((function(){void 0!==t&&e.updateValues(t)}),[e,t])}(o,t.values),[o?o.values:i.initialValues,o]}function c(n,t){var u=new e.Form(n);return u.subscribe(t,{values:!0}),u}function f(e,t){return function(u){return i(t),n.createElement(e,Object.assign({},u))}}var l=f;exports.CMSContext=t,exports.ERROR_MISSING_CMS="useCMS could not find an instance of CMS",exports.useCMS=u,exports.useCMSForm=o,exports.useForm=a,exports.useLocalForm=s,exports.usePlugin=i,exports.usePlugins=r,exports.useSubscribable=function(e,t){var u=n.useState(0)[1];n.useEffect((function(){return e.subscribe((function(){u((function(n){return n+1})),t&&t()}))}))},exports.useWatchFormValues=function(e,t){n.useEffect((function(){if(e){var n=!0;return e.subscribe((function(e){n?n=!1:t(e)}),{values:!0})}}),[t,e])},exports.withPlugin=l,exports.withPlugins=f;
//# sourceMappingURL=react-core.cjs.production.min.js.map
